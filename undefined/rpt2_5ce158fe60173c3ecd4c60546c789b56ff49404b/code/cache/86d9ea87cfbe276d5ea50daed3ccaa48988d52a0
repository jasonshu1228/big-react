{"code":"// 定义一个创建 Update实例的方法，返回值是一个 Update实例\r\nexport const createUpdate = (action) => {\r\n    return {\r\n        action\r\n    };\r\n};\r\n// 定义一个创建 UpdateQueue 队列实例的方法\r\nexport const createUpdateQueue = () => {\r\n    return {\r\n        shared: {\r\n            pending: null\r\n        }\r\n    };\r\n};\r\n// 往 UpdateQueue 里增加 Update 更新操作的任务\r\n// 将 Update 插入到 UpdateQueue\r\nexport const enqueueUpdate = (UpdateQueue, Update) => {\r\n    UpdateQueue.shared.pending = Update;\r\n};\r\n// 定义一个 UpdateQueue 消费 Update实例的方法，遍历链表中的所有Update对象，并返回最新的state\r\n// 一个初始的状态，以及要消费的Update\r\n// 返回值是一个全新的状态\r\nexport const processUpdateQueue = (baseState, pendingUpdate) => {\r\n    const result = {\r\n        memoizedState: baseState\r\n    };\r\n    // 如果有正在消费的状态\r\n    if (pendingUpdate !== null) {\r\n        const action = pendingUpdate.action;\r\n        if (action instanceof Function) {\r\n            // baseState 1 Update (x) => 4x -> memoizedState 4\r\n            result.memoizedState = action(baseState);\r\n        }\r\n        else {\r\n            // baseState 1 Update 2 ->  memoizedState 2\r\n            result.memoizedState = action;\r\n        }\r\n    }\r\n    return result;\r\n};\r\n//# sourceMappingURL=updateQueue.js.map","references":["/Users/liangshuhao/Learn/coderwhy/Learn React/Big-React18-/big-react18/packages/shared/ReactTypes.ts"],"map":"{\"version\":3,\"file\":\"updateQueue.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../packages/react-reconciler/src/updateQueue.ts\"],\"names\":[],\"mappings\":\"AAqBA,qCAAqC;AACrC,MAAM,CAAC,MAAM,YAAY,GAAG,CAAQ,MAAqB,EAAiB,EAAE;IAC3E,OAAO;QACN,MAAM;KACN,CAAC;AACH,CAAC,CAAC;AAEF,6BAA6B;AAC7B,MAAM,CAAC,MAAM,iBAAiB,GAAG,GAAU,EAAE;IAC5C,OAAO;QACN,MAAM,EAAE;YACP,OAAO,EAAE,IAAI;SACb;KACqB,CAAC;AACzB,CAAC,CAAC;AAEF,mCAAmC;AACnC,2BAA2B;AAC3B,MAAM,CAAC,MAAM,aAAa,GAAG,CAC5B,WAA+B,EAC/B,MAAqB,EACpB,EAAE;IACH,WAAW,CAAC,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;AACrC,CAAC,CAAC;AAEF,+DAA+D;AAC/D,uBAAuB;AACvB,cAAc;AACd,MAAM,CAAC,MAAM,kBAAkB,GAAG,CACjC,SAAgB,EAChB,aAAmC,EACR,EAAE;IAC7B,MAAM,MAAM,GAAiD;QAC5D,aAAa,EAAE,SAAS;KACxB,CAAC;IAEF,aAAa;IACb,IAAI,aAAa,KAAK,IAAI,EAAE;QAC3B,MAAM,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;QACpC,IAAI,MAAM,YAAY,QAAQ,EAAE;YAC/B,kDAAkD;YAClD,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;SACzC;aAAM;YACN,2CAA2C;YAC3C,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC;SAC9B;KACD;IAED,OAAO,MAAM,CAAC;AACf,CAAC,CAAC\"}"}
